{% extends "base.html" %}
{% block content %}
    
    <!-- å›å¿†æ ‡é¢˜ -->
    <h2>{{ memory.title }}</h2>
    
    <!-- å…ƒæ•°æ®: æ—¥æœŸå’Œåœ°ç‚¹ -->
    <p style="color: #666; font-size: 0.9em; margin-top: -10px;">
        {% if memory.memory_date %}
            <span>{{ memory.memory_date.strftime('%Yå¹´%mæœˆ%dæ—¥') }}</span>
        {% endif %}
        {% if memory.location %}
            <span>Â· {{ memory.location }}</span>
        {% endif %}
    </p>
    
    <!-- å…ƒæ•°æ®: ä½œè€… -->
    <p style="font-size: 0.9em; color: #555;">
        (ç”± 
        {% if memory.author_id == current_user.id %}
            <strong style="color: #007BFF;">æˆ‘</strong>
        {% else %}
            <strong style="color: #28a745;">{{ memory.author.username }}</strong>
        {% endif %}
        æ·»åŠ )
    </p>

    <!-- çºªå¿µå†Œå›¾ç‰‡ -->
    <div class="memory-image" style="margin-top: 20px; margin-bottom: 20px;">
        <img src="{{ url_for('static', filename='uploads/' + memory.image_file) }}" 
             alt="{{ memory.title }}" 
             style="width:100%; max-width:600px; height:auto; border-radius: 8px;">
    </div>
    
    <!-- çºªå¿µå†Œæ•…äº‹/æ­£æ–‡ -->
    <h4>ğŸ’– æˆ‘ä»¬çš„æ•…äº‹:</h4>
    <!-- 
      æˆ‘ä»¬ä½¿ç”¨ <pre> æ ‡ç­¾æ¥ä¿ç•™æ‚¨åœ¨ <textarea> ä¸­è¾“å…¥çš„æ¢è¡Œç¬¦
      white-space: pre-wrap; ä¼šè‡ªåŠ¨æ¢è¡Œ
    -->
    <pre style="white-space: pre-wrap; word-wrap: break-word; font-family: Arial, sans-serif; font-size: 1.1em; line-height: 1.6;">{{ memory.content }}</pre>

    <hr style="margin-top: 30px;">

    <!-- 
      å±é™©æ“ä½œåŒº: åˆ é™¤æŒ‰é’®
      (åªæœ‰è¿™ç¯‡å›å¿†çš„ä½œè€…æ‰èƒ½çœ‹åˆ°è¿™ä¸ªæŒ‰é’®)
    -->
    {% if memory.author_id == current_user.id %}
    <div class="danger-zone" style="margin-top: 20px;">
        <h3>å±é™©æ“ä½œ</h3>
        <form action="{{ url_for('delete_memory', memory_id=memory.id) }}" 
              method="POST" 
              onsubmit="return confirm('æ‚¨ç¡®å®šè¦æ°¸ä¹…åˆ é™¤è¿™ç¯‡å›å¿†å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ï¼');">
            
            <button type="submit" class="btn btn-danger">
                åˆ é™¤è¿™ç¯‡å›å¿†
            </button>
        </form>
    </div>
    {% endif %}

{% endblock %}